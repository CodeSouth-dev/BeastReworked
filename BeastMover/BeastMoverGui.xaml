<UserControl x:Class="BeastMover.BeastMoverGui"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mahapps="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:local="clr-namespace:BeastMover"
             mc:Ignorable="d"
             d:DesignHeight="Auto"
             d:DesignWidth="Auto">
    <Grid x:Name="Root" Width="Auto" Height="Auto" DataContext="{x:Static local:BeastMoverSettings.Instance}">
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Movement Settings -->
                <GroupBox Header="Movement Settings" BorderThickness="2" Margin="5">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Single Use Distance:" Margin="5"
                               ToolTipService.ToolTip="Distance threshold for single click vs hold movement (5-45). When close to target, uses single click instead of holding movement button."/>
                        <mahapps:NumericUpDown Grid.Row="0" Grid.Column="1" Margin="5"
                                             Value="{Binding Path=SingleUseDistance, Mode=TwoWay}"
                                             HorizontalAlignment="Left" Width="100"
                                             Maximum="45" Minimum="5"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="Allow Portal Movement:" Margin="5"
                               ToolTipService.ToolTip="Allow movement toward portals. Enable only when bot needs to exit maps via portal."/>
                        <CheckBox Grid.Row="1" Grid.Column="1" Margin="5,10,0,0"
                                IsChecked="{Binding Path=AllowPortalMovement, Mode=TwoWay}"/>
                    </Grid>
                </GroupBox>

                <!-- Stuck Detection Settings -->
                <GroupBox Header="Stuck Detection" BorderThickness="2" Margin="5">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Stuck Threshold:" Margin="5"
                               ToolTipService.ToolTip="Number of stuck checks before regenerating path (1-10). Lower = more aggressive recovery."/>
                        <mahapps:NumericUpDown Grid.Row="0" Grid.Column="1" Margin="5"
                                             Value="{Binding Path=StuckThreshold, Mode=TwoWay}"
                                             HorizontalAlignment="Left" Width="100"
                                             Maximum="10" Minimum="1"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="Stuck Distance:" Margin="5"
                               ToolTipService.ToolTip="Distance (in meters) to consider as 'not moving' for stuck detection (1-20)."/>
                        <mahapps:NumericUpDown Grid.Row="1" Grid.Column="1" Margin="5"
                                             Value="{Binding Path=StuckDistance, Mode=TwoWay}"
                                             HorizontalAlignment="Left" Width="100"
                                             Maximum="20" Minimum="1" Interval="0.5"/>
                    </Grid>
                </GroupBox>

                <!-- Performance Settings -->
                <GroupBox Header="Performance &amp; Debug" BorderThickness="2" Margin="5">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Path Refresh Rate (ms):" Margin="5"
                               ToolTipService.ToolTip="How often to refresh paths in milliseconds (100-5000). Lower = more responsive but more CPU usage."/>
                        <mahapps:NumericUpDown Grid.Row="0" Grid.Column="1" Margin="5"
                                             Value="{Binding Path=PathRefreshRate, Mode=TwoWay}"
                                             HorizontalAlignment="Left" Width="100"
                                             Maximum="5000" Minimum="100" Interval="100"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="Debug Logging:" Margin="5"
                               ToolTipService.ToolTip="Enable detailed logging for debugging movement issues. WARNING: Creates lots of log spam!"/>
                        <CheckBox Grid.Row="1" Grid.Column="1" Margin="5,10,0,0"
                                IsChecked="{Binding Path=DebugLogging, Mode=TwoWay}"/>
                    </Grid>
                </GroupBox>

                <!-- Info Panel -->
                <GroupBox Header="Information" BorderThickness="2" Margin="5">
                    <TextBlock Margin="10" TextWrapping="Wrap">
                        <Run Text="BeastMover v1.5.0" FontWeight="Bold"/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Features:"/>
                        <LineBreak/>
                        <Run Text="• Optimized pathfinding with ExilePather integration"/>
                        <LineBreak/>
                        <Run Text="• Movement skill support (Leap Slam, Flame Dash, etc.)"/>
                        <LineBreak/>
                        <Run Text="• Stuck detection and automatic recovery"/>
                        <LineBreak/>
                        <Run Text="• Portal avoidance (configurable)"/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Recommended Settings:"/>
                        <LineBreak/>
                        <Run Text="• Single Use Distance: 30"/>
                        <LineBreak/>
                        <Run Text="• Stuck Threshold: 3"/>
                        <LineBreak/>
                        <Run Text="• Stuck Distance: 5"/>
                        <LineBreak/>
                        <Run Text="• Path Refresh Rate: 1000ms"/>
                    </TextBlock>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
